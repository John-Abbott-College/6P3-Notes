<!DOCTYPE html>
<html lang="en"><head>
<link href="../../assets/favicon_io/favicon.ico" rel="icon">
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-8ea72dc5fed832574809a9c94082fbbb.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.40">

  <meta name="dcterms.date" content="2024-02-19">
  <title>{{&lt; var course.title &gt;}} – Package management</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; background-color: #2a0f15; font-weight: bold; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto-ab7a322b4ca39adb1086c9e0171297e3.css">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
<meta property="og:title" content="Package management – Connected Objects">
<meta property="og:description" content="How to use OS package managers, virtual environments, and pip to manage python applications effectively.">
<meta property="og:image" content="https://john-abbott-college.github.io/6P3-Notes/lectures/docs/assets/art_title_path_only.svg">
<meta property="og:site_name" content="{{< var course.title >}}">
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Package management</h1>
  <p class="subtitle">How to use OS package managers, virtual environments, and <code>pip</code> to manage python applications effectively.</p>

<div class="quarto-title-authors">
</div>

  <p class="date">2024-02-19</p>
</section>
<section id="overview" class="slide level2">
<h2>Overview</h2>
<p>This lecture looks at the ways to acquire use and install external python packages.</p>
<ul>
<li>Installing system python packages with <code>apt</code> on debian</li>
<li>Creating virtual environments with <code>venv</code></li>
<li>Installing packages locally with <code>pip</code></li>
</ul>
</section>
<section id="python-on-raspberry-pi" class="slide level2 scrollable">
<h2>Python on Raspberry Pi</h2>
<p><em>Note: most of these notes were adapted directly from the Raspberry Pi docs: <a href="https://www.raspberrypi.com/documentation/computers/os.html#python-on-raspberry-pi">Python on Raspberry Pi</a></em> <sup>1</sup></p>
<p>Python 3 is installed by default on Raspberry Pi OS, and is used for many important functions. Interfering with the system Python installation can cause problems for your operating system, so it’s important that if you install third-party Python libraries, you use the correct package-management tools.</p>
<p>There are two routes to installing libraries into the default <code>python</code> distribution. You can use <code>apt</code> and install pre-configured system packages, or you can use <code>pip</code> to install packages which are not distributed as part of Raspberry Pi OS.</p>
<aside><ol class="aside-footnotes"><li id="fn1"><p>Raspberry Pi documentation is copyright © 2012-2024 Raspberry Pi Ltd and is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a> (CC BY-SA) licence. Some content originates from the <a href="http://elinux.org/">eLinux wiki</a>, and is licensed under a <a href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported</a> licence.</p></li></ol></aside></section>
<section id="installing-python-packages-using-apt" class="slide level2">
<h2>Installing Python packages using apt</h2>
<p>::: {.callout-important} Installing packages using <code>apt</code> is the preferred method for installing Python libraries under Raspberry Pi OS. :::</p>
<p>Packages installed via <code>apt</code> are tested, are usually pre-compiled so they install faster, and are designed for Raspberry Pi OS. They won’t break your system. Installing via this route also means that all required dependencies are also installed, and a log of installation is maintained by the OS so installation can be easily rolled back (libraries can be uninstalled) if needed.</p>
<p>You can see a complete list of Python apps maintained by Debian developers on the stable repositories <a href="https://packages.debian.org/stable/python/">here</a>. Many, but not all, popular open-source Python packages are maintained for Debian by professionals and hobbyists alike.</p>
<p>To see an example: you may find yourself wanting to install the Python 3 library to support the Raspberry Pi <a href="https://www.raspberrypi.com/documentation/accessories/build-hat.html">BuildHAT</a> component. To install this using `apt1, you would:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a></a><span class="ex">$</span> sudo apt install python3-build-hat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>…​to install the pre-built library.</p>
<p>If you want to install a Python library called "foobar" you can use<code>apt search foobar</code> to find the exact package name – partial search matches are supported, so you don’t need to know the whole name in advance. Very useful!</p>
<p>Using <code>apt</code> makes installing larger packages, like <code>numpy</code> (which has many native dependencies including a Fortran compiler), <em>much simpler and more predictable</em> than installing individual packages using Python’s own package-management system.</p>
<p>::: {.callout} In <code>apt</code>, Python packages have a consistent naming scheme: you’ll find that the a given package “foobar” is going to be called <code>python-foobar</code> or <code>python3-foobar</code> in the <code>apt</code> repositories – this helps distinguish python packages from other packages on a debian system. :::</p>
</section>
<section id="installing-python-packages-using-pip" class="slide level2">
<h2>Installing python packages using Pip</h2>
<p>The goal of operating systems like Debian is to be <em>stable</em>, that is, unlikely to crash due to a poorly tested/implemented program. That does come at a cost of not always offering the latest versions of packages, nor having a complelely comprehensive set of the bleeding edge packages that are available.</p>
<p>Many developer depend on packages that are under active development. And, there are many packages that there are no Debian maintainers for. For cases like these (and many other cases, as we’ll see) it is useful for programming languages like Python to have an independent packaging manager.</p>
<p>For python, the most commonly used package manager is <a href="https://pip.pypa.io/en/stable/"><code>pip</code></a>.</p>
<blockquote>
<p>Pip installs packages from the <a href="https://pypi.org/">Python Package Index repository (pypi.org)</a> rather than the Debian or any other package repositories.</p>
</blockquote>
<p>Even though Raspberry Pi OS comes with <code>pip</code> installed, we can’t just use it right away, as we we’ll see in the next section.</p>
<h3 id="about-python-virtual-environments">About Python virtual environments</h3>
<p>In previous versions of the operating system, it was possible to install libraries directly, system-wide, using the package installer for Python, <code>pip</code>. You’ll find the following sort of command in many tutorials online – including in our Labs.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a></a><span class="ex">$</span> pip install buildhat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In newer versions of Raspberry Pi OS, and most other operating systems, this is disallowed. If you try and install a Python package system-wide you’ll receive an error similar to this:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a></a>$ pip install buildhat</span>
<span id="cb3-2"><a></a>error: externally<span class="op">-</span>managed<span class="op">-</span>environment</span>
<span id="cb3-3"><a></a></span>
<span id="cb3-4"><a></a>× This environment <span class="kw">is</span> externally managed</span>
<span id="cb3-5"><a></a>╰─<span class="op">&gt;</span> To install Python packages system<span class="op">-</span>wide, <span class="cf">try</span> apt install</span>
<span id="cb3-6"><a></a>  python3<span class="op">-</span>xyz, where xyz <span class="kw">is</span> the package you are trying to</span>
<span id="cb3-7"><a></a>  install.</span>
<span id="cb3-8"><a></a></span>
<span id="cb3-9"><a></a>  If you wish to install a non<span class="op">-</span>Debian<span class="op">-</span>packaged Python package,</span>
<span id="cb3-10"><a></a>  create a virtual environment using python3 <span class="op">-</span>m venv path<span class="op">/</span>to<span class="op">/</span>venv.</span>
<span id="cb3-11"><a></a>  Then use path<span class="op">/</span>to<span class="op">/</span>venv<span class="op">/</span><span class="bu">bin</span><span class="op">/</span>python <span class="kw">and</span> path<span class="op">/</span>to<span class="op">/</span>venv<span class="op">/</span><span class="bu">bin</span><span class="op">/</span>pip. Make</span>
<span id="cb3-12"><a></a>  sure you have python3<span class="op">-</span>full installed.</span>
<span id="cb3-13"><a></a></span>
<span id="cb3-14"><a></a>  For more information visit http:<span class="op">//</span>rptl.io<span class="op">/</span>venv</span>
<span id="cb3-15"><a></a></span>
<span id="cb3-16"><a></a>note: If you believe this <span class="kw">is</span> a mistake, please contact your Python installation <span class="kw">or</span> OS distribution provider. You can override this, at the risk of breaking your Python installation <span class="kw">or</span> OS, by passing <span class="op">--</span><span class="cf">break</span><span class="op">-</span>system<span class="op">-</span>packages.</span>
<span id="cb3-17"><a></a>hint: See PEP <span class="dv">668</span> <span class="cf">for</span> the detailed specification.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This error is generated because you’re trying to install a third-party package into the system Python. A long-standing practical problem for Python users has been conflicts between OS package managers like <code>apt</code> and Python-specific package management tools like <code>pip</code>. These conflicts include both Python-level API incompatibilities and conflicts over file ownership.</p>
<p>Therefore from <em>Debian Bookworm</em> onwards, packages installed via <code>pip</code> must be installed into a Python virtual environment using <code>venv</code>. A virtual environment is a container where you can safely install third-party modules so they won’t interfere with, or break, your system Python.</p>
<h3 id="using-pip-with-virtual-environments">Using pip with virtual environments</h3>
<p>::: {.callout} Any packages that cannot be installed using <code>apt</code> should instead installed onto a Python Virtual Environment using <code>venv</code> and <code>pip</code>. :::</p>
<p>To use a virtual environment you will need to create a container to store the environment. There are several ways you can do this depending on how you want to work with Python.</p>
<h3 id="using-a-separate-environment-for-each-project">Using a separate environment for each project</h3>
<p>One way you can proceed is to create a new virtual environment for each Python project you make. Here, you’ll create a directory to hold your own code along with a virtual environment directory:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a></a><span class="ex">$</span> mkdir my_project</span>
<span id="cb4-2"><a></a><span class="ex">$</span> cd my_project</span>
<span id="cb4-3"><a></a><span class="ex">$</span> python <span class="at">-m</span> venv env</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you now look inside the <code>my_project</code> directory you’ll see a directory called <code>env</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a></a><span class="ex">$</span> ls <span class="at">-la</span></span>
<span id="cb5-2"><a></a><span class="ex">total</span> 12</span>
<span id="cb5-3"><a></a><span class="ex">drwxr-xr-x</span>  3 pi pi 4096 Oct  3 14:34 .</span>
<span id="cb5-4"><a></a><span class="ex">drwx------</span> 20 pi pi 4096 Oct  3 14:34 ..</span>
<span id="cb5-5"><a></a><span class="ex">drwxr-xr-x</span>  5 pi pi 4096 Oct  3 14:34 env</span>
<span id="cb5-6"><a></a><span class="ex">$</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>::: {.callout-important} <strong>Very important for Lab2:</strong></p>
<p>If you want to inherit the currently installed packages from the system Python, you should create your virtual environment using <code>python -m venv --system-site-packages env</code>.</p>
<p>This will include the important Raspberry PI python modules that come with RaspberryPi OS in your venv. :::</p>
<p>Inside this directory is a full Python distribution. How do we use it?</p>
<p>A nice feature of venvs is that they <strong>must be activated to be used</strong>. This allows you to maintained several different venvs all over your machines to maintain many different projects with different versions of python.</p>
<p>To activate your virtual environment and make that version of Python the one you’re currently using, you should type:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a></a><span class="ex">$</span> source env/bin/activate</span>
<span id="cb6-2"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span> <span class="ex">$</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You’ll see that your prompt is now prepended with <code>(env)</code> to indicate that you’re no longer using the system Python. Instead, you’re using the version of Python contained inside your virtual environment. Any changes you make here won’t cause problems for your system Python; nor will any new modules you install into your environment.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span> <span class="ex">$</span> which python</span>
<span id="cb7-2"><a></a><span class="ex">/home/username/my_project/env/bin/python</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you install a third-party package, it’ll install into the Python distribution in your virtual environment:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span> <span class="ex">$</span> pip install buildhat</span>
<span id="cb8-2"><a></a><span class="ex">Looking</span> in indexes: https://pypi.org/simple, https://www.piwheels.org/simple</span>
<span id="cb8-3"><a></a><span class="ex">Collecting</span> buildhat</span>
<span id="cb8-4"><a></a>  <span class="ex">Downloading</span> https://www.piwheels.org/simple/buildhat/buildhat-0.5.12-py3-none-any.whl <span class="er">(</span><span class="ex">57</span> kB<span class="kw">)</span></span>
<span id="cb8-5"><a></a>     <span class="ex">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> 57.8/57.8 kB 2.8 MB/s eta 0:00:00</span>
<span id="cb8-6"><a></a><span class="ex">Collecting</span> gpiozero</span>
<span id="cb8-7"><a></a>  <span class="ex">Downloading</span> https://www.piwheels.org/simple/gpiozero/gpiozero-2.0-py3-none-any.whl <span class="er">(</span><span class="ex">150</span> kB<span class="kw">)</span></span>
<span id="cb8-8"><a></a>     <span class="ex">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> 150.5/150.5 kB 6.9 MB/s eta 0:00:00</span>
<span id="cb8-9"><a></a><span class="ex">Collecting</span> pyserial</span>
<span id="cb8-10"><a></a>  <span class="ex">Downloading</span> https://www.piwheels.org/simple/pyserial/pyserial-3.5-py2.py3-none-any.whl <span class="er">(</span><span class="ex">90</span> kB<span class="kw">)</span></span>
<span id="cb8-11"><a></a>     <span class="ex">━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━</span> 90.6/90.6 kB 7.5 MB/s eta 0:00:00</span>
<span id="cb8-12"><a></a><span class="ex">Collecting</span> colorzero</span>
<span id="cb8-13"><a></a>  <span class="ex">Downloading</span> https://www.piwheels.org/simple/colorzero/colorzero-2.0-py2.py3-none-any.whl <span class="er">(</span><span class="ex">26</span> kB<span class="kw">)</span></span>
<span id="cb8-14"><a></a><span class="ex">Requirement</span> already satisfied: setuptools in ./env/lib/python3.11/site-packages <span class="er">(</span><span class="ex">from</span> colorzero-<span class="op">&gt;</span>gpiozero-<span class="op">&gt;</span>buildhat<span class="kw">)</span> <span class="kw">(</span><span class="ex">66.1.1</span><span class="kw">)</span></span>
<span id="cb8-15"><a></a><span class="ex">Installing</span> collected packages: pyserial, colorzero, gpiozero, buildhat</span>
<span id="cb8-16"><a></a><span class="ex">Successfully</span> installed buildhat-0.5.12 colorzero-2.0 gpiozero-2.0 pyserial-3.5</span>
<span id="cb8-17"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span> <span class="ex">$</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now, if you <code>pip list</code>, you’ll see that your current version of Python includes your new modules.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span> <span class="ex">$</span> pip list</span>
<span id="cb9-2"><a></a><span class="ex">Package</span>    Version</span>
<span id="cb9-3"><a></a><span class="ex">----------</span> <span class="at">-------</span></span>
<span id="cb9-4"><a></a><span class="ex">buildhat</span>   0.5.12</span>
<span id="cb9-5"><a></a><span class="ex">colorzero</span>  2.0</span>
<span id="cb9-6"><a></a><span class="ex">gpiozero</span>   2.0</span>
<span id="cb9-7"><a></a><span class="ex">pip</span>        23.0.1</span>
<span id="cb9-8"><a></a><span class="ex">pyserial</span>   3.5</span>
<span id="cb9-9"><a></a><span class="ex">setuptools</span> 66.1.1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>After writing your code, you can run it from the command line inside the virtual environment as you’d expect, by invoking Python as usual.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span> <span class="ex">$</span> ls <span class="at">-la</span></span>
<span id="cb10-2"><a></a><span class="ex">total</span> 12</span>
<span id="cb10-3"><a></a><span class="ex">drwxr-xr-x</span>  3 pi pi 4096 Oct  3 14:34 .</span>
<span id="cb10-4"><a></a><span class="ex">drwx------</span> 20 pi pi 4096 Oct  3 14:34 ..</span>
<span id="cb10-5"><a></a><span class="ex">drwxr-xr-x</span>  5 pi pi 4096 Oct  3 14:34 env</span>
<span id="cb10-6"><a></a><span class="ex">-rw-r--r--</span>  1 pi pi    0 Oct  3 14:45 my_code.py</span>
<span id="cb10-7"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span> <span class="ex">$</span> python my_code.py</span>
<span id="cb10-8"><a></a><span class="ex">Hello</span> World!</span>
<span id="cb10-9"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span> <span class="ex">$</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can leave your virtual environment and return to using the system Python by typing:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span> <span class="ex">$</span> deactivate</span>
<span id="cb11-2"><a></a><span class="ex">$</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>…​and demonstrate to yourself you’ve done so by checking the installed packages using <code>pip list</code>.</p>
<h3 id="including-system-packages-in-your-venv">Including system packages in your venv</h3>
<p><em>This section has been adapted directly from realPython.com: <a href="https://realpython.com/python-virtual-environments-a-primer/#include-the-system-site-packages">Virtual Environments: Include the System Site-Packages</a>. The whole article is worth skimming for reference.</em></p>
<p>In this class, we will often use the RaspberryPi python packages that we install system-wide (<code>gpio</code>, <code>RPi</code>, etc), and we may want to access them in the same environment where we create local virtual environments.</p>
<p>That is, while you still want to keep your projects in separate environments, you can save the effort of re-installing <code>gpio</code> or <code>RPi</code> into each of these projects.</p>
<p>You can access all modules you’ve installed to your base Python’s site-packages directory by adding the <code>--system-site-packages</code> flag when creating your virtual environment.</p>
<p>::: {.callout} Note: If you install any additional external packages, then Python will put them into the site-packages directory of your virtual environment. You only get read access to the system site-packages directory. :::</p>
<p>Create a new virtual environment while passing this argument. You’ll see that in addition to your local site-packages directory, the path to your base Python’s site-packages directory will stick around in sys.path.</p>
<p>To test this, you can create and activate a new virtual environment using the <code>--system-site-packages</code> argument:</p>
<pre><code>$ python3 -m venv env --system-site-packages
$ source venv/bin/activate
(venv) $</code></pre>
<p>Once again, you’ve created a new virtual environment named venv, but this time you passed the <code>--system-site-packages</code> argument. Adding this optional argument resulted in a different setting in your <code>venv/pyvenv.cfg</code> file:</p>
<pre><code>$ cat env/pyvenv.cfg
home = /usr/bin
include-system-site-packages = true
version = 3.11</code></pre>
<p>By default, the <code>include-system-site-packages</code> is set to false.</p>
<p>::: {.callout} It is common to forget to include the <code>--system-site-packages</code> flag when creating a venv. <strong>If you create a virtual environment and forget to include system site packages, you can include them again by changing <code>include-system-site-packages</code> in your environment <code>env/pyvenv.cfg</code> to <code>true</code> in your venv</strong>. :::</p>
<p>This change means that you’ll see an additional entry to sys.path, which allows the Python interpreter in your virtual environment to also access the system site-packages directory. Make sure your virtual environment is active, then start the Python interpreter to check the path variables:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span> <span class="ex">$</span> python</span>
<span id="cb14-2"><a></a><span class="op">&gt;&gt;&gt;</span> import <span class="ex">sys</span></span>
<span id="cb14-3"><a></a><span class="op">&gt;&gt;&gt;</span> from <span class="ex">pprint</span> import pp</span>
<span id="cb14-4"><a></a><span class="op">&gt;&gt;&gt;</span> pp<span class="kw">(</span><span class="ex">sys.path</span><span class="kw">)</span></span>
<span id="cb14-5"><a></a><span class="ex">[</span><span class="st">''</span><span class="ex">,</span></span>
<span id="cb14-6"><a></a> <span class="st">'/usr/local/lib/python311.zip'</span><span class="ex">,</span></span>
<span id="cb14-7"><a></a>  <span class="st">'etc.'</span></span>
<span id="cb14-8"><a></a><span class="ex">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<h3 id="using-packages-that-require-root-permissions">Using packages that require root permissions</h3>
<p>The <code>venv</code> pattern is very useful for maintaining packages that do not require root permissions. This is a feature, not a bug – that way, you can have many developers independently install packages on one machine without needing to give them root permissions.</p>
<p>Sometimes (and particularly, in this couse) the packages we install <em>require</em> root permissions to work. Consider the packages that edit LED <code>/sys/</code> files, like <code>seeed-python-reterminal</code> we install in Lab 2. We will run into an issue if we try to use these packages as normal users:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span> <span class="ex">user@hostname:~/lab2/python</span> $ python ./leds.py</span>
<span id="cb15-2"><a></a><span class="co"># ... output redacted</span></span>
<span id="cb15-3"><a></a><span class="op">&lt;</span>Permissions <span class="ex">error</span><span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>It is unfortunately not fixable by simply using <code>sudo</code>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span> <span class="ex">user@hostname:~/lab2/python</span> $ sudo python ./leds.py</span>
<span id="cb16-2"><a></a><span class="co"># ... output redacted</span></span>
<span id="cb16-3"><a></a><span class="op">&lt;</span>Module <span class="ex">seeed-python-terminal</span> not included/available<span class="op">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Why isn’t the package available? Well, <code>sudo</code> runs <code>python</code> <em>as the root user</em>. The root user does not have your <code>venv</code> of python in its path. Try the commands below on your system to see if you understand what I mean.</p>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">normal user</a></li><li><a href="#tabset-1-2">sudo user</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="sourceCode" id="cb17"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span><span class="ex">jyourusername@yourhostname:~</span> $ which python</span>
<span id="cb17-2"><a></a><span class="co"># &lt;double check that the python executable comes from your venv&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-2">
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span><span class="ex">jyourusername@yourhostname:~</span> $ sudo su</span>
<span id="cb18-2"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span><span class="ex">root@yourhostname:~</span> <span class="co"># which python</span></span>
<span id="cb18-3"><a></a><span class="co"># &lt;you should see that the python executable is in a different place!, even though we still have "env"&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>How to resolve this problem? It is similar to the <code>sudo echo &gt; file</code> problem we saw with Bash. We need to make sure <code>sudo</code> is applying to the <em>correct python executable</em>. There are a few ways we can do this, all of which will look something like this:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span><span class="ex">jyourusername@yourhostname:~</span> $ sudo /absolute/path/to/venv/python ./leds.py</span>
<span id="cb19-2"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span><span class="ex">jyourusername@yourhostname:~</span> $ sudo ./env/relative/path/to/venv/python ./leds.py</span>
<span id="cb19-3"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span><span class="ex">jyourusername@yourhostname:~</span> $ sudo <span class="va">$(</span><span class="ex">shell</span> command for finding where python is installed<span class="va">)</span> ./leds.py <span class="co"># use command substitution</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Try a few of these options out (will not work if you copy paste! Make sure you understand the commands)</p>
<h3 id="using-a-separate-environment-for-each-user">Using a separate environment for each user</h3>
<p>An alternative method to creating a virtual environment for each of your Python projects is to create a single virtual environment for your user account, and then activate that environment before running any of your Python code. This approach may be preferred if you commonly install the same set of modules for each project, and don’t want to have to bother creating individual Python environments for each project, essentially just duplicating your environment.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a></a><span class="ex">$</span> python <span class="at">-m</span> venv ~/.env</span>
<span id="cb20-2"><a></a><span class="ex">$</span> source ~/.env/bin/activate</span>
<span id="cb20-3"><a></a><span class="kw">(</span><span class="ex">.env</span><span class="kw">)</span> <span class="ex">$</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can check again that you’re in a separate environment by using <code>pip list</code>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a></a><span class="kw">(</span><span class="ex">.env</span><span class="kw">)</span> <span class="ex">$</span> pip list</span>
<span id="cb21-2"><a></a><span class="ex">Package</span>    Version</span>
<span id="cb21-3"><a></a><span class="ex">----------</span> <span class="at">-------</span></span>
<span id="cb21-4"><a></a><span class="ex">pip</span>        23.0.1</span>
<span id="cb21-5"><a></a><span class="ex">setuptools</span> 66.1.1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>…​and leave it using <code>deactivate</code>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a></a><span class="kw">(</span><span class="ex">.env</span><span class="kw">)</span> <span class="ex">$</span> deactivate</span>
<span id="cb22-2"><a></a><span class="ex">$</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<h3 id="check-library-location">Check library location</h3>
<p>Check the location of where the module was installed with <code>pip show &lt;module-name&gt;</code>:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><a></a><span class="kw">(</span><span class="fu">env</span><span class="kw">)</span> <span class="ex">pi@raspberrypi:~</span> $ pip show seeed-python-reterminal</span>
<span id="cb23-2"><a></a></span>
<span id="cb23-3"><a></a><span class="ex">Name:</span> seeed-python-reterminal</span>
<span id="cb23-4"><a></a><span class="ex">Version:</span> 0.2</span>
<span id="cb23-5"><a></a><span class="ex">Summary:</span> seeed-python-reterminal</span>
<span id="cb23-6"><a></a><span class="ex">Home-page:</span> https://github.com/Seeed-Studio/Seeed_Python_ReTerminal</span>
<span id="cb23-7"><a></a><span class="ex">Author:</span> Takashi Matsuoka <span class="er">(</span><span class="ex">matsujirushi</span><span class="kw">)</span></span>
<span id="cb23-8"><a></a><span class="ex">Author-email:</span> matsujirushi@live.jp</span>
<span id="cb23-9"><a></a><span class="ex">License:</span> MIT License</span>
<span id="cb23-10"><a></a><span class="ex">Location:</span> /usr/local/lib/python3.7/dist-packages      <span class="co"># Library location</span></span>
<span id="cb23-11"><a></a><span class="ex">Requires:</span> evdev</span>
<span id="cb23-12"><a></a><span class="ex">Required-by:</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The library is installed at: <code>Location: /usr/local/lib/python3.7/dist-packages</code></p>
</section>
<section id="troubleshooting" class="slide level2">
<h2>Troubleshooting</h2>
<h3 id="check-pythons-library-paths">Check python’s library paths</h3>
<p>Similarly to Linux, there are environmental variables that determine where python will look for installed modules/libraries.</p>
<p>See the paths where python is looking for libraries with <code>sys.path</code>. They should look something like:</p>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1">system</a></li><li><a href="#tabset-2-2">venv</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a></a>pi<span class="op">@</span>raspberrypi:<span class="op">~</span> $ python</span>
<span id="cb24-2"><a></a></span>
<span id="cb24-3"><a></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> sys      <span class="co"># Exposes configuration used by the python interpreter.</span></span>
<span id="cb24-4"><a></a><span class="op">&gt;&gt;&gt;</span> sys.path        <span class="co"># Lists all paths where interpreter looks for modules.</span></span>
<span id="cb24-5"><a></a>[<span class="st">''</span>, <span class="st">'/usr/lib/python311.zip'</span>, <span class="st">'/usr/lib/python3.11'</span>, <span class="st">'/usr/lib/python3.11/lib-dynload'</span>, <span class="st">'/usr/local/lib/python3.11/dist-packages'</span>, <span class="st">'/usr/lib/python3/dist-packages'</span>, <span class="st">'/usr/lib/python3.11/dist-packages'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-2-2">
<div class="sourceCode" id="cb25"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a></a>(env) pi<span class="op">@</span>raspberrypi:<span class="op">~</span> $ python</span>
<span id="cb25-2"><a></a></span>
<span id="cb25-3"><a></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> sys      <span class="co"># Exposes configuration used by the python interpreter.</span></span>
<span id="cb25-4"><a></a><span class="op">&gt;&gt;&gt;</span> sys.path        <span class="co"># Lists all paths where interpreter looks for modules.</span></span>
<span id="cb25-5"><a></a>[<span class="st">''</span>, <span class="st">'/usr/lib/python311.zip'</span>, <span class="st">'/usr/lib/python3.11'</span>, <span class="st">'/usr/lib/python3.11/lib-dynload'</span>, <span class="st">'/home/pi/lab2/python/env/lib/python3.11/site-packages'</span>, <span class="st">'/usr/local/lib/python3.11/dist-packages'</span>, <span class="st">'/usr/lib/python3/dist-packages'</span>, <span class="st">'/usr/lib/python3.11/dist-packages'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>If the output of <code>pip show seeed-python-reterminal</code> is not in this list, python will not find it when you import it.</p>
<blockquote>
<p><strong>Note:</strong> the python shell above was started as the user <code>pi</code>. If you start python as <strong>root</strong>, <code>sys.path</code> might have different paths.</p>
</blockquote>
<p>Note that the user <code>pi</code> does not have permission to add content inside <code>/usr</code>.</p>
<p>Thus, all <code>pip</code> installations as the regular user go into <code>/home/pi/.local/lib/python3.11/site-packages</code>.</p>


</section>

    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p>© Copyright 2024-2025 Michael Haaf. All rights reserved.</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.2,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp("https:\/\/john-abbott-college\.github\.io\/6P3-Notes\/");
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>